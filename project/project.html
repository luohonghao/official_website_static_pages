<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>项目案例</title>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap-3.3.4.css" />
    <link rel="stylesheet" type="text/css" href="../libs/swiper.min.css" />
    <link rel="stylesheet" type="text/css" href="../css/bootsnav.css" />
    <link rel="stylesheet" type="text/css" href="../css/service.css" />
    <style>
      .swiper-pagination-bullet {
        width: 28px;
        height: 28px;
        text-align: center;
        line-height: 28px;
        font-size: 12px;
        color: #000;
        opacity: 1;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 0;
      }

      .swiper-pagination-bullet-active {
        color: #fff;
        background: #e94709;
      }

      .swiper-container-horizontal
        > .swiper-pagination-bullets
        .swiper-pagination-bullet {
        margin: 0 1px;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <div class="header">
        <nav class="navbar navbar-default navbar-mobile bootsnav">
          <div class="navbar-header">
            <button
              type="button"
              class="navbar-toggle"
              data-toggle="collapse"
              data-target="#navbar-menu"
            >
              <i class="fa fa-bars"></i>
            </button>
          </div>
          <div class="collapse navbar-collapse" id="navbar-menu">
            <ul
              class="nav navbar-nav"
              data-in="fadeInDown"
              data-out="fadeOutUp"
            >
              <li class="li"><a href="../index.html">PINZA</a></li>
              <li class="dropdown li">
                <a
                  href="../about/about.html"
                  class="dropdown-toggle"
                  data-toggle="dropdown"
                  >我们是谁</a
                >
                <ul class="dropdown-menu">
                  <li><a href="../about/about.html">关于品宅</a></li>
                  <li><a href="../about/partner.html">品宅合伙人</a></li>
                  <li><a href="../about/corevalue.html">核心价值</a></li>
                  <li><a href="../about/contact.html">联系我们</a></li>
                </ul>
              </li>
              <li class="dropdown li">
                <a
                  href="../product/product.html"
                  class="dropdown-toggle"
                  data-toggle="dropdown"
                  >产品服务</a
                >
                <ul class="dropdown-menu">
                  <li><a href="../product/product.html">了解装配式内装</a></li>
                  <li><a href="../product/service.html">部装产品及服务</a></li>
                  <li><a href="../product/advantage.html">核心优势</a></li>
                </ul>
              </li>
              <li class="img">
                <img
                  src="../images/logo-05.png"
                  width="220"
                  style="position: absolute;z-index: 9999"
                />
              </li>
              <li class="dropdown li margin-left">
                <a
                  href="../project/project.html?currentTab=0"
                  class="dropdown-toggle"
                  data-toggle="dropdown"
                  >项目案例</a
                >
                <ul class="dropdown-menu">
                  <li>
                    <a href="../project/project.html?currentTab=0">长租公寓</a>
                  </li>
                  <li>
                    <a href="../project/project.html?currentTab=1">租赁住房</a>
                  </li>
                  <li>
                    <a href="../project/project.html?currentTab=2">商品住房</a>
                  </li>
                  <li>
                    <a href="../project/project.html?currentTab=3">商业办公</a>
                  </li>
                </ul>
              </li>
              <li class="li"><a href="../news/news-list.html">新闻动态</a></li>
              <li class="li"><a href="../careers/careers.html">人才发展</a></li>
            </ul>
          </div>
        </nav>
      </div>
      <div
        class="banner text-center"
        style="background-image: url('../images/banner-project.png')"
      >
        <p>
          项目案例 <br />
          PROJECT CASE
        </p>
      </div>
      <div class="main" style="background-image: url('../images/di-3.png')">
        <div class="main-container">
          <div class="content">
            <p class="content-p">
              <span class="color-red">·</span>您所在的位置：<span>项目案例</span
              ><span class="red">>{{ currentTabInfo.name }}</span>
            </p>
          </div>
          <div class="content-header">
            <div
              v-for="(item, index) in projectList"
              :class="['inline-block','list',{active:currentTab==index}]"
              @click="change(item,index)"
              :key="index"
            >
              {{ item.name }}
            </div>
          </div>
          <div class="content-body margin-40">
            <div class="main-container-title">
              <div class="title text-center">
                <img src="../images/about-title.png" alt="" width="100%" />
                <span class="red">{{ currentTabInfo.name }}</span>
              </div>
            </div>
            <h2>LONG RENTED APARTMENT</h2>
          </div>
        </div>
        <div
          class="banner-project"
          style="position: relative;top:-36px;padding-bottom: 80px;margin-bottom: 40px"
        >
          <div class="banner_content">
            <div
              class="swiper-container2"
              style="width: 80%;margin: auto;overflow: hidden"
            >
              <div class="swiper-wrapper">
                <!-- 幻灯片 -->
                <div
                  class="swiper-slide"
                  v-for="(item,index) in currentTabInfo.project"
                >
                  <a :href="item.url" class="transition" target="_blank">
                    <!-- 此处有坑 在这个网站进行watermark image 参数加密 http://tool.oschina.net/encrypt?type=3  -->
                    <img
                      :src="item.mainPhotoList[0].url+'?x-oss-process=image/watermark,image_cGFuZGEucG5nP3gtb3NzLXByb2Nlc3M9aW1hZ2UvcmVzaXplLHdfMjAw,t_90,g_se,x_10,y_10'"
                      width="100%"
                    />
                  </a>

                  <div class="slide-banner-box">
                    <div class="box-p">
                      <div class="box-p-title">{{ item.name }}</div>
                      <div class="box-p-content">
                        <ul>
                          <li>项目类型：{{ item.type }}</li>
                          <li>项目地点：{{ item.location }}</li>
                          <li>项目套数：{{ item.series }}户</li>
                          <li>总面积：{{ item.area }}㎡</li>
                          <li>施工时间：{{ item.time }}天</li>
                        </ul>
                      </div>
                    </div>
                    <div class="box-t">
                      <div
                        class="box-t-list inline-block"
                        v-for="(ob,idx) in 3"
                        :key="'o'+idx"
                      >
                        <img
                          :src="item.photoList[idx].url"
                          alt=""
                          width="100%"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Add Arrows -->

              <div class="swiper-button-next2"></div>
              <div class="swiper-button-prev2"></div>
              <!-- Add Pagination -->
              <div class="swiper-pagination"></div>
            </div>
          </div>
        </div>
        <!-- 龙湖冠寓模态框（Modal） -->
        <div
          class="modal fade"
          id="myModal"
          tabindex="-1"
          role="dialog"
          aria-labelledby="myModalLabel"
          aria-hidden="true"
          data-backdrop="static"
          data-keyboard="false"
        >
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button
                  type="button"
                  class="close"
                  data-dismiss="modal"
                  aria-hidden="true"
                >
                  &times;
                </button>
              </div>

              <div class="modal-box">
                <div
                  class="swiper-container3"
                  style="width:100%;overflow: hidden"
                >
                  <div class="swiper-wrapper">
                    <div
                      class="swiper-slide"
                      v-for="(item,index) in currentModalPhotoList"
                      :key="index"
                    >
                      <img
                        :src="item.url+'?x-oss-process=image/watermark,image_cGFuZGEucG5nP3gtb3NzLXByb2Nlc3M9aW1hZ2UvcmVzaXplLHdfMjAw,t_90,g_se,x_10,y_10'"
                        width="100%"
                      />
                    </div>
                  </div>
                  <!-- Add Arrows -->

                  <div class="swiper-button-next2"></div>
                  <div class="swiper-button-prev2"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 弹窗结束 -->
      </div>
      <div class="toTop"></div>

      <div class="footer">
        <div class="footer-box">
          <div class="footer-box-content">
            <div class="inline-block list">
              <ul>
                <li><a href="../aabout/about.html">我们是谁</a></li>
                <li><a href="../about/about.html">关于品宅</a></li>
                <li><a href="../about/partner.html">品宅合伙人</a></li>
                <li><a href="../about/corevalue.html">核心价值</a></li>
                <li><a href="../about/contact.html">联系我们</a></li>
              </ul>
            </div>
            <div class="inline-block list">
              <ul>
                <li><a href="../product/product.html">产品服务</a></li>
                <li><a href="../product/product.html">了解装配式内装</a></li>
                <li><a href="../product/service.html">部装产品及服务</a></li>
                <li><a href="../product/advantage.html">核心优势</a></li>
              </ul>
            </div>
            <div class="inline-block list">
              <ul>
                <li>
                  <a href="./project/project.html?currentTab=0">项目案例</a>
                </li>
                <li>
                  <a href="./project/project.html?currentTab=0">长租公寓</a>
                </li>
                <li>
                  <a href="./project/project.html?currentTab=1">租赁住房</a>
                </li>
                <li>
                  <a href="./project/project.html?currentTab=2">商品住房</a>
                </li>
                <li>
                  <a href="./project/project.html?currentTab=3">商业办公</a>
                </li>
              </ul>
            </div>
            <div class="inline-block list">
              <ul>
                <li class="li">
                  <a href="../news/news-list.html">新闻动态</a>
                </li>
              </ul>
            </div>
            <div class="inline-block list">
              <ul>
                <li class="li">
                  <a href="../careers/careers.html">人才发展</a>
                </li>
              </ul>
            </div>
            <div class="inline-block list" style="text-align: right">
              <img src="../images/pinza.png" alt="品宅二维码" width="60%" />
            </div>
          </div>
          <div class="footer-box-content">
            <div class="inline-block content-list">
              <p>联系电话</p>
              <p style="font-size: 12px">
                咨询热线：400-188-7919 商务专线：139 1724 3731
              </p>
            </div>
            <div class="inline-block content-list">
              <p>办公地址</p>
              <p style="font-size: 12px">上海市徐汇区桂林路402号76幢310室</p>
            </div>
            <div class="inline-block content-list">
              <p>研发中心地址</p>
              <p style="font-size: 12px">上海浦东新区康杉路518号B区102室</p>
            </div>
          </div>
          <div class="footer-box-content">
            <p class="content-bottom">
              COPYRIGHT (©) 2017 PINZA- ALLSIZE WEB DESIGN
            </p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>
<script type="text/javascript" src="../libs/swiper.min.js"></script>
<script type="text/javascript" src="../js/bootsnav.js"></script>

<script src="http://pinzafile.oss-cn-shanghai.aliyuncs.com/vue-element/dist/vue.js"></script>
<script src="http://pinzafile.oss-cn-shanghai.aliyuncs.com/axios/axios.js"></script>
<script src="../js/trueUrl.js"></script>

<script>
  function getQueryVariable(variable) {
    var query = window.location.search.substring(1);
    var vars = query.split("&");
    for (var i = 0; i < vars.length; i++) {
      var pair = vars[i].split("=");
      if (pair[0] == variable) {
        return pair[1];
      }
    }
    return false;
  }
  function jqInit() {
    var mySwiper = new Swiper(".swiper-container2", {
      // slidesPerView: '1',
      spaceBetween: 30,
      loop: true,
      navigation: {
        nextEl: ".swiper-button-next2",
        prevEl: ".swiper-button-prev2"
      },
      on: {
        slideChange: function() {
          console.log(this.realIndex);
          app.currentProject = this.realIndex;
        }
      },
      initialSlide: parseInt(getQueryVariable("currentProject")) || 0,
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
        renderBullet: function(index, className) {
          return '<span class="' + className + '">' + (index + 1) + "</span>";
        }
      }
    });
    var mySwiper = new Swiper(".swiper-container3", {
      // slidesPerView: '1',
      spaceBetween: 30,
      navigation: {
        nextEl: ".swiper-button-next2",
        prevEl: ".swiper-button-prev2"
      },
      observer: true, //修改swiper自己或子元素时，自动初始化swiper
      observeParents: true //修改swiper的父元素时，自动初始化swiper
    });

    // 模态弹窗
    $(".box-t .box-t-list").click(function() {
      $("#myModal").modal("show");
    });
    $("#close").click(function() {
      $("#myModal").modal("hide");
    });
  }

  // 模态窗口垂直居中
  function centerModals() {
    $("#myModal").each(function(i) {
      var $clone = $(this)
        .clone()
        .css("display", "block")
        .appendTo("body");
      var top = Math.round(
        ($clone.height() - $clone.find(".modal-content").height()) / 2
      );
      top = top > 0 ? top : 0;
      $clone.remove();
      $(this)
        .find(".modal-content")
        .css("margin-top", top);
    });
  }

  $("#myModal").on("show.bs.modal", centerModals);

  //页面大小变化是仍然保证模态框水平垂直居中
  $(window).on("resize", centerModals);

  var app = new Vue({
    el: "#app",
    data: function() {
      return {
        projectList: [],
        currentTab: parseInt(getQueryVariable("currentTab")),
        currentProject: parseInt(getQueryVariable("currentProject")) || 0
      };
    },
    methods: {
      change: function(item, index) {
        this.currentTab = index;
        app.$nextTick(function() {
          jqInit();
        });
      }
    },
    computed: {
      currentTabInfo: function() {
        return this.projectList[this.currentTab] || { name: "", project: [] };
      },
      currentModalPhotoList: function() {
        if (this.currentTabInfo.project.length > 0) {
          return (
            this.currentTabInfo.project[this.currentProject].photoList || []
          );
        } else {
          return [];
        }
      }
    },
    mounted: function() {
      $.ajax(trueUrl + "/projectList", {
        success: function(res) {
          console.log(res.data);
          app.projectList = res.data;
          app.$nextTick(function() {
            jqInit();
          });
        },
        error: function(error) {
          console.error(error);
        }
      });
    }
    // async mounted() {
    //   try {
    //     // 异步加载json
    //     let response = await axios.post(`${trueUrl}/newsList`, {});
    //     console.log(response.data.data);
    //     this.新闻列表 = response.data.data;
    //   } catch (error) {
    //     console.error(error);
    //   }
    // }
  });
</script>
